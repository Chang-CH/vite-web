# Segment Tree

Use case: Range queries, what is the maximum value in range [l, r]? More overhead/ boilerplate than Fenwick Tree, but more flexible (fenwick can only sum/subtract etc., not min/max).

- Time Complexity: O(log n) 
- Space Complexity: O(n)

```python
class SegmentTree:
    def __init__(self, arr):
        self.n = len(arr)
        self.tree = [0] * (2 * self.n)
        self.tree[self.n:] = arr
        for i in range(self.n - 1, 0, -1):
            self.tree[i] = self.operation(self.tree[i * 2], self.tree[i * 2 + 1])
    
    def operation(self, a, b):
        # Modify this
        return a + b
    
    def update(self, i, val):
        i += self.n
        self.tree[i] = val
        while i > 1:
            i //= 2
            self.tree[i] = self.operation(self.tree[i * 2], self.tree[i * 2 + 1])
    
    def query(self, l, r):
        l += self.n
        r += self.n
        res = 0
        while l < r:
            if l % 2:
                res = self.operation(res, self.tree[l])
                l += 1
            if r % 2:
                r -= 1
                res = self.operation(res, self.tree[r])
            l //= 2
            r //= 2
        return res
```